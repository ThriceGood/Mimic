<!DOCTYPE html>
 <html lang="en">
 
 <head>
     <meta charset="utf-8">
     <meta charset="utf-8">
  	 <meta name="viewport" content="width=device-width, initial-scale=1">
 
     <title>Mimic Insert</title>
 
    <!-- Bootstrap core CSS -->
    <!-- <link href="static/css/bootstrap.min.css" rel="stylesheet"> -->
    <!-- Custom styles for this template -->
    <!-- <link href="static/css/signin.css" rel="stylesheet"> -->
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> -->
     <!--<script src="static/js/jquery-1.9.0.js"> </script>-->

    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
 
 </head>
 
 <body>
 
     <div class="container">
 
         <form class="" action="/signUp" method="post" role="form">
             <h2 class="form-signin-heading">Insert Mimic endpoint </h2>
             <input id='verb' name="verb"  placeholder="verb">
             <input id='service' name="service"  placeholder="service">
             <input id='url' name="url"  placeholder="url">
             <input id='tag' name="tag"  placeholder="tag">
             <input id='schema' name="schema"  placeholder="schema">
             <input id='resp' name="response"  placeholder="response">

             <button class="btn btn-default" type="button">Insert </button>
         </form>
      
     </div>
   
 </body>

 <script type="text/javascript">
 	
 	$(function() {
	    $('button').click(function() {
	        var verb = $('#verb').val();
	        var service = $('#service').val();
	        var url = $('#url').val();
	        var tag = $('#tag').val();
	        var schema = $('#schema').val();
	        var response = $('#resp').val();

	        dict = {
	        	'verb': verb,
	        	'service': service,
	        	'url': url,
	        	'tag': tag,
	        	'schema': schema,
	        	'payload': response,
	        }

	        var json_string = JSON.stringify(dict)

	        // alert(json_string)
	        console.log(json_string)

	        $.ajax({
	        	beforeSend: function(xhrObj){
			        xhrObj.setRequestHeader("Content-Type","application/json");
			        xhrObj.setRequestHeader("Accept","application/json");
			    },
	            url: '/insert_endpoint',
	            data: json_string,
	            dataType: "json",
	            type: 'POST',
            	success: function(response) {
                	// console.log(JSON.parse(response));
                	// alert(JSON.parse(response));
                	console.log(response);
            	},
            	error: function(error) {
                	console.log(error);
            	}
        	});
    	});
	});


 </script>
 
 </html>